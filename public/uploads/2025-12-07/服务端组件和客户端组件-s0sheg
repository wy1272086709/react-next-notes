##### **关于服务端组件和客户端组件的渲染环境**

*   服务端组件只会在服务端渲染
*   客户端组件会在服务端渲染一次，然后在客户端渲染

    > 之所以会在服务端渲染一次，是为了第一次加载的时候，能更快的展示出内容
    >
    > 服务端组件运行在构建时和服务端，客户端组件运行在构建时、服务端（生成初始 HTML）和客户端（管理 DOM）。

##### &#x20;关于服务端组件和客户端组件的限制

*   服务端组件中不能使用 `useState、use Effect` 等react hooks，不能使用浏览器Api.
*   客户端组件中不能使用 Node的一些Api, 如`process.env.XX` 等
*   组件默认是服务端组件，可以在服务端组件中使用客户端组件
*   客户端组件中，不能直接导入服务端组件，可以将服务端组件作为Props 传递给客户端组件
*   在React服务端组件中不能使用`Context`

#### &#x20;使用客户端组件的最佳实践

1、客户端组件尽可能下移

2、从服务端组件到客户端组件传递的数据需要能够被正确地序列化，不能直接传递函数，可以传递props属性的方式，或者以children的形式传递给客户端组件

> React 需要先在服务端将组件树先序列化传给客户端，再在客户端反序列化构建出组件树。如果你传递了不能序列化的数据，这就会导致错误。

